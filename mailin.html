<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail-in Repair Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom font for better aesthetics */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
        }
        /* Ensure the form container is centered and has max width */
        .form-container {
            max-width: 800px; /* Adjust as needed for larger screens */
        }
        /* Hide print instructions and non-form elements when printing */
        @media print {
            .no-print {
                display: none !important;
            }
            body {
                background-color: #fff; /* White background for printing */
                padding: 0;
                margin: 0;
            }
            .form-container {
                box-shadow: none; /* No shadow on print */
                border: 1px solid #ccc; /* Light border for print */
                padding: 15px; /* Adjusted padding for print */
                margin: 0;
                width: 100%;
                max-width: 100%;
                border-radius: 0;
            }
            input, textarea, select {
                border: 1px solid #ccc !important; /* Ensure borders are visible on print */
                padding: 4px !important; /* Adjusted padding for print */
                font-size: 10pt; /* Adjust font size for print */
            }
            label, p, h1, h2, h3, address {
                font-size: 10pt; /* Adjust font size for print */
            }
            button {
                display: none !important; /* Hide buttons on print */
            }
            .page-break-before {
                page-break-before: always;
            }
        }
    </style>
</head>
<body class="p-2 sm:p-4 md:p-6 lg:p-8">
    <div class="form-container mx-auto bg-white rounded-lg shadow-lg p-4 sm:p-6 md:p-8 mt-4 mb-4">
        <h1 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-5">Mail-in Repair Form</h1>
        <p class="text-center text-gray-600 mb-6 text-sm sm:text-base">
            Please fill out this form completely and include it with your device when mailing it in for repair.
        </p>

        <div id="quoteDetailsSection" class="mb-6 p-4 border border-blue-200 rounded-md bg-blue-50" style="display: none;">
            <h2 class="text-xl sm:text-2xl font-semibold text-blue-700 mb-3">Online Quote Details</h2>
            <div id="quotedItemsList" class="mb-2 text-sm text-gray-700 space-y-1"></div>
            <div id="quotedDiscount" class="text-sm text-green-600 font-medium" style="display: none;"></div>
            <hr id="quoteDetailsSeparator" class="my-2 border-blue-200" style="display: none;">
            <p class="text-right font-bold text-blue-600 text-lg">Quoted Total: <span id="quotedTotal"></span></p>
            <p class="text-xs text-center mt-3 text-gray-500">This is an estimate. Final price will be confirmed after device inspection.</p>
        </div>

        <form>
            <div class="mb-6 p-4 border border-gray-200 rounded-md bg-gray-50">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-700 mb-3">Customer Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div>
                        <label for="fullName" class="block text-gray-700 text-sm font-bold mb-1">Full Name:</label>
                        <input type="text" id="fullName" name="fullName" placeholder="John Doe"
                               class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" required>
                    </div>
                    <div>
                        <label for="email" class="block text-gray-700 text-sm font-bold mb-1">Email Address:</label>
                        <input type="email" id="email" name="email" placeholder="john.doe@example.com"
                               class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" required>
                    </div>
                    <div>
                        <label for="phone" class="block text-gray-700 text-sm font-bold mb-1">Phone Number:</label>
                        <input type="tel" id="phone" name="phone" placeholder="(123) 456-7890"
                               class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" required>
                    </div>
                    <div>
                        <label for="address" class="block text-gray-700 text-sm font-bold mb-1">Shipping Address:</label>
                        <input type="text" id="address" name="address" placeholder="123 Main St, Anytown, USA 12345"
                               class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" required>
                    </div>
                </div>
            </div>

            <div class="mb-6 p-4 border border-gray-200 rounded-md bg-gray-50">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-700 mb-3">Device Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div>
                        <label for="deviceType" class="block text-gray-700 text-sm font-bold mb-1">Device Type:</label>
                        <select id="deviceType" name="deviceType"
                                class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" required>
                            <option value="">Select Device Type</option>
                            <option value="smartphone">Smartphone</option>
                            <option value="tablet">Tablet</option>
                            <option value="laptop">Laptop</option>
                            <option value="desktop">Desktop PC</option>
                            <option value="gamingConsole">Gaming Console</option>
                            <option value="wearable">Wearable Device</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label for="brand" class="block text-gray-700 text-sm font-bold mb-1">Brand:</label>
                        <input type="text" id="brand" name="brand" placeholder="Apple, Samsung, Dell, etc."
                               class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" required>
                    </div>
                    <div>
                        <label for="model" class="block text-gray-700 text-sm font-bold mb-1">Model:</label>
                        <input type="text" id="model" name="model" placeholder="iPhone 13, Galaxy S22, XPS 15, etc."
                               class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" required>
                    </div>
                    <div>
                        <label for="serialNumber" class="block text-gray-700 text-sm font-bold mb-1">Serial Number (or IMEI):</label>
                        <input type="text" id="serialNumber" name="serialNumber" placeholder="ABC123XYZ789"
                               class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400">
                    </div>
                </div>
                <div class="mt-3">
                    <label for="problemDescription" class="block text-gray-700 text-sm font-bold mb-1">Describe the Problem (or paste quoted services):</label>
                    <textarea id="problemDescription" name="problemDescription" rows="4" placeholder="e.g., Screen is cracked, device won't turn on, battery drains quickly, etc. Or paste services from online quote."
                              class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" required></textarea>
                </div>
                <div class="mt-3">
                    <label for="passcode" class="block text-gray-700 text-sm font-bold mb-1">Passcode/Unlock Pattern (if applicable):</label>
                    <input type="text" id="passcode" name="passcode" placeholder="Leave blank if not applicable or device is factory reset"
                           class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400">
                    <p class="text-xs text-gray-500 mt-1">Providing a passcode allows us to fully test the device after repair. If you prefer not to, please ensure the device is factory reset before mailing.</p>
                </div>
            </div>

            <div class="mb-6 p-4 border border-gray-200 rounded-md bg-gray-50">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-700 mb-3">Terms and Conditions</h2>
                <div class="flex items-start mb-3">
                    <input type="checkbox" id="termsAccepted" name="termsAccepted" class="mt-1 mr-2 accent-blue-500" required>
                    <label for="termsAccepted" class="text-gray-700 text-sm">
                        I agree to the <a href="https://www.jwselectronicsrepair.com/legal-notice" target="_blank" class="text-blue-600 hover:underline">repair terms and conditions</a>. I understand that I am responsible for backing up my data before sending the device, and that data loss may occur during the repair process.
                    </label>
                </div>
                <div class="mt-4">
                    <label for="signature" class="block text-gray-700 text-sm font-bold mb-1">Customer Signature:</label>
                    <input type="text" id="signature" name="signature" placeholder="Print Full Name"
                           class="shadow appearance-none border-b-2 border-gray-400 w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:border-blue-500" required>
                    <p class="text-xs text-gray-500 mt-1">By printing your name above, you agree to the terms.</p>
                </div>
                <div class="mt-3">
                    <label for="date" class="block text-gray-700 text-sm font-bold mb-1">Date:</label>
                    <input type="date" id="date" name="date"
                           class="shadow appearance-none border rounded-md w-full py-1.5 px-2.5 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" required>
                </div>
            </div>

            <div class="mb-6 p-4 border border-gray-200 rounded-md bg-yellow-50">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-700 mb-3">Mailing Instructions</h2>
                <p class="text-gray-700 mb-1.5 text-sm">
                    1.  <strong>Package your device securely:</strong> Use appropriate padding (bubble wrap, foam peanuts) to prevent damage during transit. Do not include any wires or chargers.
                </p>
                <p class="text-gray-700 mb-1.5 text-sm">
                    2.  <strong>Include this completed form:</strong> Place the printed form inside the package with your device.
                </p>
                <p class="text-gray-700 mb-1.5 text-sm">
                    3.  <strong>Ship to:</strong>
                </p>
                <address class="text-gray-800 font-semibold ml-4 text-sm not-italic">
                    JWS Electronics Repair<br>
                    1167 deer park ave.<br>
                    North Babylon, NY 11703<br>
                    631-855-5555 or 631-606-2FIX(2349)
                </address>
                <p class="text-gray-700 mt-2 text-sm">
                    We recommend using a shipping service with tracking and insurance. 
                    After we receive your device and check it in, we will contact you with the diagnosis and exact pricing before proceeding with repair.
                    Return shipping is included for most devices if the repair is performed. 
                    If we are not repairing the device or device is unrepairable then you will be charged for return shipping.  
                </p>
            </div>

            <div class="no-print flex flex-col items-center space-y-4">
                <button type="button" onclick="window.print()"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 px-5 rounded-lg shadow-md transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">
                    Print Form
                </button>

                <div class="text-center">
                    <p class="text-gray-700 font-semibold mb-2">Create a Shipping Label:</p>
                    <div class="flex flex-wrap justify-center gap-3">
                        <a href="https://www.ups.com/ship/guided/origin?loc=en_US" target="_blank" rel="noopener noreferrer"
                           class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">
                            UPS
                        </a>
                        <a href="https://www.fedex.com/en-us/shipping/create-shipping-label.html" target="_blank" rel="noopener noreferrer"
                           class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">
                            FedEx
                        </a>
                        <a href="https://www.usps.com/ship/online-shipping.htm" target="_blank" rel="noopener noreferrer"
                           class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">
                            USPS
                        </a>
                        <a href="https://www.dhl.com/us-en/home/ship/create-shipping-label.html" target="_blank" rel="noopener noreferrer"
                           class="bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">
                            DHL
                        </a>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            console.log("URL Parameters found:", urlParams.toString()); // For debugging

            const totalParam = urlParams.get('total');
            const itemsString = urlParams.get('items');
            const discountParam = urlParams.get('discount');

            const quoteDetailsSection = document.getElementById('quoteDetailsSection');
            const quotedItemsListDiv = document.getElementById('quotedItemsList');
            const quotedDiscountDiv = document.getElementById('quotedDiscount');
            const quotedTotalSpan = document.getElementById('quotedTotal');
            const quoteDetailsSeparator = document.getElementById('quoteDetailsSeparator');
            const problemDescriptionTextarea = document.getElementById('problemDescription');

            let hasAnyQuoteData = false;
            let problemDescLines = []; // Use an array to build description lines

            // Clear any previous dynamic content
            quotedItemsListDiv.innerHTML = ''; 
            quotedDiscountDiv.style.display = 'none';
            quotedDiscountDiv.textContent = ''; 
            quoteDetailsSeparator.style.display = 'none';
            quotedTotalSpan.textContent = ''; 

            if (itemsString && itemsString.trim() !== "") {
                hasAnyQuoteData = true;
                const itemsArray = itemsString.split('; '); 
                const ul = document.createElement('ul');
                ul.className = 'list-disc list-inside space-y-1';
                
                problemDescLines.push("Services from online quote:");
                itemsArray.forEach(itemText => {
                    const trimmedItem = itemText.trim();
                    if (trimmedItem !== "") { 
                        const li = document.createElement('li');
                        li.textContent = trimmedItem;
                        ul.appendChild(li);
                        problemDescLines.push(`- ${trimmedItem}`);
                    }
                });
                if (ul.hasChildNodes()) { 
                    quotedItemsListDiv.appendChild(ul);
                }
            }

            if (discountParam && parseFloat(discountParam) > 0) {
                hasAnyQuoteData = true;
                const discountValue = parseFloat(discountParam);
                quotedDiscountDiv.textContent = `Multi-Item Discount Applied: -$${discountValue.toFixed(2)}`;
                quotedDiscountDiv.style.display = 'block';
                problemDescLines.push(`Discount Applied: -$${discountValue.toFixed(2)}`);
            }

            if (totalParam) {
                hasAnyQuoteData = true;
                const totalValue = parseFloat(totalParam);
                quotedTotalSpan.textContent = `$${totalValue.toFixed(2)}`;
                problemDescLines.push(`Quoted Total: $${totalValue.toFixed(2)}`);
            }

            if (problemDescriptionTextarea && problemDescLines.length > 0) {
                 problemDescriptionTextarea.value = problemDescLines.join("\n");
            }


            if (hasAnyQuoteData) {
                quoteDetailsSection.style.display = 'block';
                // Show separator only if there are items AND a discount
                if (quotedItemsListDiv.hasChildNodes() && discountParam && parseFloat(discountParam) > 0) {
                     quoteDetailsSeparator.style.display = 'block';
                } else {
                    quoteDetailsSeparator.style.display = 'none';
                }
            } else {
                quoteDetailsSection.style.display = 'none'; 
            }

            // Set current date for the date input
            const dateInput = document.getElementById('date');
            if (dateInput) {
                const today = new Date();
                const yyyy = today.getFullYear(); // Corrected from YYYY
                const mm = String(today.getMonth() + 1).padStart(2, '0'); 
                const dd = String(today.getDate()).padStart(2, '0');
                dateInput.value = `${yyyy}-${mm}-${dd}`;
            }
        });
    </script>

</body>
</html>





